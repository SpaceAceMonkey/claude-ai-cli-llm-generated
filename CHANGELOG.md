# Changelog

> **Note**: This changelog is automatically generated by AI and has not been manually reviewed or edited by humans. While it aims to accurately reflect project changes, please verify details against the actual codebase and commit history.

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- **Comprehensive Test Suite**: Implemented extensive unit, integration, and property-based tests
  - 75+ tests covering dialog handling, file operations, navigation, and error scenarios
  - Property-based tests using QuickCheck for robustness validation
  - Organized test modules in `src/handlers/events/tests/`
  - Test coverage for save/load dialogs, exit confirmation, directory creation, and file operations
- **Test Documentation**: All tests annotated with detailed comments explaining purpose and expected results
- **Improved Dialog Layout**: 
  - Exit dialog now dynamically sizes to content with 90% screen width limit
  - Better text wrapping prevention and dialog centering
  - Enhanced visual consistency across different terminal sizes
- **Color Configuration Error Handling**: Show error dialog when config file is corrupt or unreadable on startup
- **Color Preferences Persistence**: Automatically save color preferences on application exit
- **Enhanced Documentation**: Consolidated color configuration examples and usage patterns into main README.md
- **Organized Documentation Structure**: Created `docs/` directory with `development/` subdirectory for technical implementation details

### Fixed
- **Command-Line Color Override Bug**: Fixed critical bug where specifying default color values via command line (e.g., `--background-color black`) would not override saved config file values
- **Test Suite Compatibility**: Updated all test files to work with new ColorConfig parameter requirements
- **Breaking Change Resolution**: Systematically fixed 44+ test compilation errors after ColorConfig API changes

### Changed
- **Color Configuration Architecture**: Refactored color argument parsing to use `Option<String>` instead of default values, enabling proper distinction between "not provided" vs "explicitly provided" arguments
- **Documentation Organization**: Removed redundant markdown files (`COLOR_USAGE.md`, `HOTKEY_UPDATE.md`, `DIALOG_INSTRUCTIONS_FIX.md`) and consolidated essential information into main README.md
- **Project Structure**: Moved development-specific documentation to `docs/development/` directory for better organization

### Improved
- **Code Organization**: Better separation of dialog logic and UI rendering
- **Error Handling**: More robust error scenarios covered by tests
- **Performance**: Test suite validates performance characteristics under various load conditions
- **Maintainability**: Comprehensive test documentation makes codebase more maintainable
- **Type Safety**: Enhanced command-line argument parsing with proper Option handling

### Technical
- **Dependencies**: Added `tempfile` and `quickcheck` as dev-dependencies for testing
- **Test Infrastructure**: Modular test organization with helper functions and fixture management
- **Validation**: All dialog interactions validated for state consistency and error handling
- **Error Reporting**: Added comprehensive error reporting for color configuration loading
- **Test Coverage**: All 212 tests passing after systematic fixes to accommodate ColorConfig changes
- **Code Quality**: Improved separation of concerns between configuration loading and error handling

### Removed
- **Redundant Documentation**: Eliminated duplicate markdown files that contained information already present in README.md
- **Broken Reference**: Removed reference to non-existent COLOR_USAGE.md file from README.md

## [0.3.0] - 2025-07-08

### Added
- **Save/Load Conversation System**: Complete JSON serialization with `/save` and `/load` commands
- **File Browser Dialogs**: Full filesystem navigation with directory traversal, file selection, and breadcrumb display
- **Directory Management**: "Create New Directory" functionality integrated into save dialog
- **Exit Confirmation Dialog**: Escape key now shows Yes/No confirmation instead of immediate exit
- **Error Dialog System**: Overlay dialogs for displaying API errors and file operation failures
- **Unicode Text Support**: Proper character-based string operations for international text input
- **Dialog Priority System**: Hierarchical event handling (error → exit → file dialogs → main interface)
- **Empty Conversation Support**: Allow loading and saving conversations with no messages

### Changed
- Escape key behavior: now shows exit confirmation dialog instead of immediate termination
- File dialogs start from current working directory instead of home directory
- Enhanced status messages with detailed feedback for all operations

### Fixed
- String manipulation now properly handles multi-byte Unicode characters
- Cursor positioning in all dialog input fields
- Dialog overlay rendering and event priority handling

## [0.2.0] - 2025-07-07

### Added
- **Terminal User Interface (TUI)**: Full-screen chat interface using ratatui
- **Real-time Chat**: Interactive conversation with Claude AI through Anthropic API
- **Message History**: Persistent conversation thread with role-based formatting
- **Input Controls**: Multi-line input with keyboard navigation (arrows, home/end, backspace/delete)
- **Auto-scrolling**: Intelligent scroll behavior for new messages
- **Progress Indicators**: Visual feedback during API calls
- **Command Line Arguments**: Configurable API key, model, temperature, max tokens
- **Simulation Mode**: Testing mode without actual API calls
- **Token Tracking**: Display of input/output token usage
- **Syntax Highlighting**: Code block formatting in responses
- **Copy to Clipboard**: Easy copying of AI responses
- **Conversation Management**: Clear conversation functionality
- **Shift+Enter Support**: Send messages with keyboard shortcut
- **Feature Flags**: Configurable auto-scroll behavior

### Technical Features
- Async/await architecture for non-blocking API calls
- Cross-platform terminal handling
- Robust error handling and user feedback
- Modular code structure with separate client and config modules

## [0.1.0] - Initial Release
- Basic CLI interface for Claude